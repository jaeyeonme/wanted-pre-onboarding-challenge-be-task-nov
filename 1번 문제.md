# 동시에 같은 DB Table Row를 업데이트 하는 방법
## 1. 데이터베이스 잠금 메커니즘
- `비관적 잠금(Pessimistic Locking)`: 트랜잭션 동안 행을 잠그는 접근 방식입니다. 예를 들어, SQL Server의 "반복 가능 읽기" 격리 수준은 트랜잭션이 완료될 때까지 다른 트랜잭션이 해당 행에 간섭할 수 없도록 보장합니다.
- `낙관적 잠금(Optimistic Locking)`: 비관적 잠금과 달리, 데이터를 미리 잠그지 않고 트랜잭션 동안 데이터 변경을 감시합니다. 충돌이 감지되면 (예: 데이터가 처음 읽힌 이후 변경된 경우) 트랜잭션은 완료되지 않습니다.

<br>
<br>

## 2. SQL 격리 수준
SQL 표준은 동시 환경에서 발생할 수 있는 세 가지 일관성 이상 현상을 정의합니다: 더티 읽기, 반복 불가능 읽기, 팬텀 읽기. 이러한 현상은 `Read Committed`, `Repeatable Read`, `Serializable` 등의 다른 격리 수준을 사용하여 방지할 수 있습니다.
SQL Server에서는 Repeatable Read 및 Serializable 격리 수준이 잠금 메커니즘을 사용하여 동시 수정을 방지할 수 있습니다. 두 트랜잭션이 동일한 행을 업데이트하려고 하면, 두 번째 트랜잭션은 첫 번째 트랜잭션이 커밋하거나 롤백할 때까지 기다려야 합니다.


<br>
<br>

## 요약
동일한 DB 행에 대한 동시 업데이트를 방지하기 위해 비관적 잠금(트랜잭션 동안 행을 잠그는 것), 낙관적 잠금(트랜잭션 동안 변경을 감시하고 충돌이 감지되면 중단하는 것), 또는 특정 SQL 격리 수준을 사용할 수 있습니다. 각 접근 방식은 장단점이 있으며, 선택은 데이터베이스 작업의 특정 요구 사항과 맥락에 따라 달라집니다. 데이터베이스와 같은 고도로 동시에 작동하는 시스템에서 이러한 충돌을 관리하는 것은 데이터 무결성과 일관성을 유지하는 데 중요합니다.
